import{_ as e}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as p,c as o,a as n,e as t,g as s,f as c,h as i}from"./app.17eb5f9b.js";const l={},u=n("p",null,"\u672C\u6587\u9009\u62E9\u4E86\u76D1\u542C\u5168\u5C40\u4E8B\u4EF6\u7684\u65B9\u5F0F\u5B9E\u73B0\u4E86 uniapp \u5C0F\u7A0B\u5E8F\u7684\u57CB\u70B9\uFF0C\u5BF9\u4E1A\u52A1\u7684\u4FB5\u5165\u6027\u8F83\u5C0F\u3002",-1),r=n("h2",{id:"\u4EE3\u7801\u4F4D\u7F6E",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4EE3\u7801\u4F4D\u7F6E","aria-hidden":"true"},"#"),s(" \u4EE3\u7801\u4F4D\u7F6E")],-1),k={href:"https://gitee.com/zhangkb/example-code/tree/master/uniapp-track",target:"_blank",rel:"noopener noreferrer"},d=s("https://gitee.com/zhangkb/example-code/tree/master/uniapp-track"),m=n("h2",{id:"\u6574\u4F53\u67B6\u6784\u8BBE\u8BA1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6574\u4F53\u67B6\u6784\u8BBE\u8BA1","aria-hidden":"true"},"#"),s(" \u6574\u4F53\u67B6\u6784\u8BBE\u8BA1")],-1),v=s("\u6574\u4E2A "),h=n("code",null,"Tracker",-1),_=s(" \u7C7B\u7684\u8BBE\u8BA1\u4E0E"),b={href:"https://juejin.cn/post/7503839846022135823",target:"_blank",rel:"noopener noreferrer"},f=s("\u7F51\u7AD9\u57CB\u70B9"),g=s("\u65B9\u6848\u4E00\u81F4\uFF0C\u53EA\u662F\u9488\u5BF9\u5C0F\u7A0B\u5E8F\u505A\u4E86\u9002\u914D\uFF0C\u8FD9\u91CC\u4E0D\u518D\u8D58\u8FF0\u3002"),y=n("h2",{id:"uniapp-\u4E2D\u5982\u4F55\u76D1\u542C\u5168\u5C40\u4E8B\u4EF6",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#uniapp-\u4E2D\u5982\u4F55\u76D1\u542C\u5168\u5C40\u4E8B\u4EF6","aria-hidden":"true"},"#"),s(" uniapp \u4E2D\u5982\u4F55\u76D1\u542C\u5168\u5C40\u4E8B\u4EF6")],-1),w=n("h3",{id:"globaleventproxy-js",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#globaleventproxy-js","aria-hidden":"true"},"#"),s(" GlobalEventProxy.js")],-1),j=s("\u901A\u8FC7\u52AB\u6301 "),x=n("code",null,"Component",-1),P=s(" \u7684\u5F62\u5F0F\u5B9E\u73B0\u76D1\u542C\uFF0C\u5177\u4F53\u601D\u8DEF\u770B\u8FD9\u7BC7\u6587\u7AE0\uFF1A"),q={href:"https://www.jb51.net/article/267426.htm",target:"_blank",rel:"noopener noreferrer"},N=s("Uniapp \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u5B9E\u73B0\u5168\u5C40\u4E8B\u4EF6\u76D1\u542C\u5E76\u8FDB\u884C\u6570\u636E\u57CB\u70B9\u7684\u65B9\u6CD5"),V=s("\u3002"),E=c(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> TrackEvent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./Tracker&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">isObject</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;[object Object]&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// \u52AB\u6301Component</span>
  <span class="token keyword">const</span> _componentProto_ <span class="token operator">=</span> Component<span class="token punctuation">;</span>
  <span class="token function-variable function">Component</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//options.methods\u5185\u6709uniapp\u6CE8\u5165\u7684\u4E8B\u4EF6\u5904\u7406\u5668__e\u53CAmpHook</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>methods<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">methodName</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>methodName <span class="token operator">==</span> <span class="token string">&quot;__e&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//\u52AB\u6301\u4E8B\u4EF6\u5904\u7406\u5668</span>
        <span class="token function">eventProxy</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>methods<span class="token punctuation">,</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_componentProto_</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">eventProxy</span><span class="token punctuation">(</span><span class="token parameter">methodList<span class="token punctuation">,</span> methodName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> _funcProto_ <span class="token operator">=</span> methodList<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    methodList<span class="token punctuation">[</span>methodName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">_funcProto_</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//\u8BB0\u5F55\u89E6\u53D1\u9875\u9762\u4FE1\u606F</span>
            <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> currentPage <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> currentPageVm <span class="token operator">=</span> currentPage<span class="token punctuation">.</span>$vm<span class="token punctuation">;</span>
            <span class="token comment">// const type = arguments[0][&#39;type&#39;]</span>
            <span class="token keyword">const</span> currentTarget <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>currentTarget <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> dataset <span class="token operator">=</span> currentTarget<span class="token punctuation">.</span>dataset <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">// console.log(999999, dataset, arguments[0])</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>currentPageVm<span class="token punctuation">.</span>tracker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>dataset<span class="token punctuation">[</span>TrackEvent<span class="token punctuation">.</span>click<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                currentPageVm<span class="token punctuation">.</span>tracker<span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;track proxy error&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="main-js" tabindex="-1"><a class="header-anchor" href="#main-js" aria-hidden="true">#</a> main.js</h3><p>\u5728 <code>src/main.js</code> \u4E2D\u5F15\u5165 <code>GlobalEventProxy.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&quot;@/services/bussiness/track/GlobalEventProxy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&quot;@/App.vue&quot;</span><span class="token punctuation">;</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>App<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h2>`,5),T={href:"https://ask.dcloud.net.cn/article/38921",target:"_blank",rel:"noopener noreferrer"},C=s("uni-app \u4E0B\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u81EA\u52A8\u57CB\u70B9"),O={href:"https://github.com/growingio/growingio-sdk-miniprogram-autotracker#readme",target:"_blank",rel:"noopener noreferrer"},L=s("GrowingIO \u5C0F\u7A0B\u5E8F\u91C7\u96C6 SDK"),G={href:"https://juejin.cn/post/6889238969616171022",target:"_blank",rel:"noopener noreferrer"},A=s("\u524D\u7AEF\u7EC4\u4EF6\u5316\u57CB\u70B9\u7684\u5B9E\u8DF5"),B={href:"https://www.jb51.net/article/267426.htm",target:"_blank",rel:"noopener noreferrer"},I=s("Uniapp \u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u5B9E\u73B0\u5168\u5C40\u4E8B\u4EF6\u76D1\u542C\u5E76\u8FDB\u884C\u6570\u636E\u57CB\u70B9\u7684\u65B9\u6CD5"),S={href:"https://juejin.cn/post/7114450860335169543",target:"_blank",rel:"noopener noreferrer"},z=s("\u6D45\u8C08\u524D\u7AEF\u57CB\u70B9 & \u76D1\u63A7"),U={href:"https://juejin.cn/post/7094146488439144455",target:"_blank",rel:"noopener noreferrer"},$=s("\u524D\u7AEF\u57CB\u70B9\u5B9E\u73B0\u65B9\u6848 \u2714"),D={href:"https://juejin.cn/post/7400264313125470208",target:"_blank",rel:"noopener noreferrer"},H=s("\u6D45\u6790\u524D\u7AEF\u76D1\u63A7\u4E0E\u57CB\u70B9"),K={href:"https://juejin.cn/post/7036306825804775454",target:"_blank",rel:"noopener noreferrer"},F=s("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u300A\u57CB\u70B9\u7CFB\u7EDF\u8BBE\u8BA1\u300B"),J={href:"https://juejin.cn/post/6844903536648699911",target:"_blank",rel:"noopener noreferrer"},M=s("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u65E0\u57CB\u70B9\u6570\u636E\u91C7\u96C6\u65B9\u6848"),Q={href:"https://juejin.cn/post/6937481792643399693",target:"_blank",rel:"noopener noreferrer"},R=s("\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F\u7EC4\u4EF6\u5316\u57CB\u70B9\u5B9E\u8DF5");function W(X,Y){const a=i("ExternalLinkIcon");return p(),o("div",null,[u,r,n("p",null,[n("a",k,[d,t(a)])]),m,n("p",null,[v,h,_,n("a",b,[f,t(a)]),g]),y,w,n("p",null,[j,x,P,n("a",q,[N,t(a)]),V]),E,n("p",null,[n("a",T,[C,t(a)])]),n("p",null,[n("a",O,[L,t(a)])]),n("p",null,[n("a",G,[A,t(a)])]),n("p",null,[n("a",B,[I,t(a)])]),n("p",null,[n("a",S,[z,t(a)])]),n("p",null,[n("a",U,[$,t(a)])]),n("p",null,[n("a",D,[H,t(a)])]),n("p",null,[n("a",K,[F,t(a)])]),n("p",null,[n("a",J,[M,t(a)])]),n("p",null,[n("a",Q,[R,t(a)])])])}const sn=e(l,[["render",W],["__file","uniapp\u5C0F\u7A0B\u5E8F\u81EA\u52A8\u5316\u57CB\u70B9\u65B9\u6848.html.vue"]]);export{sn as default};
