(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{773:function(t,a,e){"use strict";e.r(a);var r=e(12),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("为了让 JavaScript 与显卡之间进行大量的、实时的数据交换，它们之间的数据通信必须是二进制，而不能是传统的文本格式，ArrayBuffer 就是在这样的背景下 诞生的。")]),t._v(" "),e("h2",{attrs:{id:"arraybuffer"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#arraybuffer"}},[t._v("#")]),t._v(" ArrayBuffer")]),t._v(" "),e("p",[t._v("ArrayBuffer 对象用来表示通用的、固定长度的原始二进制数据缓冲区，它是 JavaScript 操作二进制数据的一个接口。")]),t._v(" "),e("p",[t._v("不能直接操作 ArrayBuffer 的内容，而是要通过类型化数组（TypedArray）或 DataView 对象来操作。")]),t._v(" "),e("h3",{attrs:{id:"构造函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#构造函数"}},[t._v("#")]),t._v(" 构造函数")]),t._v(" "),e("blockquote",[e("p",[t._v("new ArrayBuffer(length)")])]),t._v(" "),e("p",[t._v("ArrayBuffer 构造函数用来创建一个指定字节长度的 ArrayBuffer 对象，它分配了一段可以存放数据的连续内存区域，参数为内存大小，单位为字节。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("返回值：返回一个指定大小的 ArrayBuffer 对象， 其内容被初始化为 0。")])]),t._v(" "),e("li",[e("p",[t._v("异常：如果 length 大于 Number.MAX_SAFE_INTEGER（>= 2 ** 53）或为负数，则抛出一个 RangeError 异常。")])])]),t._v(" "),e("p",[t._v("需要值得注意的是如果要分配的内存区域很大，有可能分配失败（因为没有那么多的连续空余内存），所以有必要检查是否分配成功。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" bf "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBuffer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("40")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成了字节长度为40的内存区域")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//通过提供的 byteLength 属性返回分配字节的长度")]),t._v("\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("byteLength"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 40")]),t._v("\n")])])]),e("h3",{attrs:{id:"属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("ArrayBuffer.length")]),t._v(" "),e("p",[t._v("ArrayBuffer 构造函数的 length 属性，其值为 1。")])]),t._v(" "),e("li",[e("p",[t._v("ArrayBuffer.prototype.byteLength")]),t._v(" "),e("p",[t._v("只读属性，表示 ArrayBuffer 的 byte 的大小，在 ArrayBuffer 构造完成时生成，不可改变。")])])]),t._v(" "),e("h3",{attrs:{id:"静态方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#静态方法"}},[t._v("#")]),t._v(" 静态方法")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("ArrayBuffer.isView(arg)")]),t._v(" "),e("p",[t._v("如果参数是 ArrayBuffer 的视图实例则返回 true，例如 类型数组对象 或 DataView 对象；否则返回 false。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" data "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBuffer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" view "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DataView")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nArrayBuffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("isView")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])])])]),t._v(" "),e("h3",{attrs:{id:"原型方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原型方法"}},[t._v("#")]),t._v(" 原型方法")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("ArrayBuffer.ptotorype.slcie(beginIndex, endIndex)")]),t._v(" "),e("p",[t._v("slice()方法返回一个新的 ArrayBuffer ，它的内容是这个 ArrayBuffer 的字节副本，从 begin（包括），到 end（不包括）。")])])]),t._v(" "),e("h2",{attrs:{id:"typedarray"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#typedarray"}},[t._v("#")]),t._v(" TypedArray")]),t._v(" "),e("p",[t._v("一个类型化数组（TypedArray）对象描述了一个底层的二进制数据缓冲区（binary data buffer）的一个类数组视图（view）。")]),t._v(" "),e("p",[t._v("TypedArray 并不是一个全局属性或是构造函数，它代表了一系列不同的全局属性和构造函数。")]),t._v(" "),e("p",[t._v("1 byte = 8 bit（字节），如 Int8Array 每一位字节数为 1，Int16Array 每一位字节数为 2。")]),t._v(" "),e("p",[t._v("TypedArray 其实就是普通数组，语法没有什么不同，只不过它直接针对内存进行操作，而且每个成员都有确定的数据类型。所以，TypedArray 就被叫做“类型化数组”。")]),t._v(" "),e("p",[t._v("用 TypedArray 建立了视图以后，就可以进行各种操作了。")]),t._v(" "),e("h3",{attrs:{id:"具体的-typedarray-类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#具体的-typedarray-类型"}},[t._v("#")]),t._v(" 具体的 TypedArray 类型")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("单个元素值的范围")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("大小(bytes)")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("描述")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("Web IDL 类型")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Int8Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-128")]),t._v(" to "),e("code",[t._v("127")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8 位二进制有符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("byte")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Uint8Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")]),t._v(" to "),e("code",[t._v("255")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8 位无符号整数（超出范围后从另一边界循环）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("octet")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Uint8ClampedArray")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")]),t._v(" to "),e("code",[t._v("255")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8 位无符号整数（超出范围后为边界值）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("octet")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Int16Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-32768")]),t._v(" to "),e("code",[t._v("32767")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("16 位二进制有符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("short")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Uint16Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")]),t._v(" to "),e("code",[t._v("65535")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("16 位无符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("unsigned short")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Int32Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-2147483648")]),t._v(" to "),e("code",[t._v("2147483647")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("32 位二进制有符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("long")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Uint32Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")]),t._v(" to "),e("code",[t._v("4294967295")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("32 位无符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("unsigned long")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Float32Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("1.2")]),t._v("×"),e("code",[t._v("10-38")]),t._v(" to "),e("code",[t._v("3.4")]),t._v("×"),e("code",[t._v("1038")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("4")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("32 位 IEEE 浮点数（7 位有效数字，如 "),e("code",[t._v("1.1234567")]),t._v("）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("unrestricted float")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("Float64Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("5.0")]),t._v("×"),e("code",[t._v("10-324")]),t._v(" to "),e("code",[t._v("1.8")]),t._v("×"),e("code",[t._v("10308")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("64 位 IEEE 浮点数（16 有效数字，如 "),e("code",[t._v("1.123...15")]),t._v(")")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("unrestricted double")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("BigInt64Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("-263")]),t._v(" to "),e("code",[t._v("263-1")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("64 位二进制有符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("bigint")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("BigUint64Array")]),e("OutboundLink")],1)]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("0")]),t._v(" to "),e("code",[t._v("264-1")])]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("8")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("64 位无符号整数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("bigint")])])])])]),t._v(" "),e("h3",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法")]),t._v(" "),e("p",[t._v("TypedArray 并不是可用的构造函数，需要替换成如 Int8Array() 这样的构造函数。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下面代码是语法格式，不能直接运行，")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedArray")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ES2017中新增")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedArray")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedArray")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("typedArray"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedArray")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypedArray")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" byteOffset "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" length"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("length")]),t._v(" "),e("p",[t._v("当传入 length 参数时，一个内部的数组缓冲区会被创建在内存中。")]),t._v(" "),e("p",[t._v("该缓存区的大小（类型化数组中 byteLength 属性的值）是传入的 length 乘以数组中每个元素的字节数。")]),t._v(" "),e("p",[t._v("每个元素的字节数是由具体的构造函数决定的，比如 Int16Array() 的每个元素的字节数为 2，Int32Array() 的每个元素的字节数为 4。")])]),t._v(" "),e("li",[e("p",[t._v("TypedArray")]),t._v(" "),e("p",[t._v("当传入一个任意类型化数组对象作为 typedArray 参数时（比如 Int32Array），typedArray 会被复制到一个新的类型数组中。")]),t._v(" "),e("p",[t._v("typedArray 中的每个值在被复制到新的数组之前，会被转化为相应类型的构造函数。")]),t._v(" "),e("p",[t._v("新生成的类型化数组对象将会有跟传入的数组相同的"),e("strong",[t._v("长度")]),t._v("（即元素数量），比如原来的类型化数组的 length 为 2，那么新生成的数组的 length 也是 2，只是数组中的每一项进行了转化。")])]),t._v(" "),e("li",[e("p",[t._v("object")]),t._v(" "),e("p",[t._v("当传入一个 object 作为参数时，就像通过 TypedArray.from() 方法创建一个新的类型化数组一样。")])]),t._v(" "),e("li",[e("p",[t._v("buffer, byteOffset, length")]),t._v(" "),e("p",[t._v("创建一个类型化数组视图，可用于呈现传入的 ArrayBuffer 实例。byteOffset 表示起始位置，length 表示要占用的长度。")])])]),t._v(" "),e("h3",{attrs:{id:"属性-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#属性-2"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("TypedArray.BYTES_PER_ELEMENT")]),t._v(" "),e("p",[t._v("返回一个数值，代表不同类型的类型化数组对象中，单个元素的字节大小。")]),t._v(" "),e("p",[t._v("例如："),e("code",[t._v("new Int8Array().BYTES_PER_ELEMENT === 1")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("TypedArray.length")]),t._v(" "),e("p",[t._v("类型化数组中元素的个数，例如 "),e("code",[t._v("new Int8Array(3).length === 3")]),t._v("。")])]),t._v(" "),e("li",[e("p",[t._v("TypedArray.name")]),t._v(" "),e("p",[t._v('返回一个字符串值，代表当前构造器的名称，例如 "Int8Array"。')]),t._v(" "),e("p",[t._v("注意此方法为静态方法。")])])]),t._v(" "),e("h3",{attrs:{id:"方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("TypedArray.from()")]),t._v(" "),e("p",[t._v("使用类数组(array-like)或迭代对象创建一个新的类型化数组，与 Array.from() 类似。")])]),t._v(" "),e("li",[e("p",[t._v("TypedArray.of()")]),t._v(" "),e("p",[t._v("通过可变数量的参数创建新的类型化数组，与 Array.of() 类似。")])])]),t._v(" "),e("h3",{attrs:{id:"复合视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#复合视图"}},[t._v("#")]),t._v(" 复合视图")]),t._v(" "),e("p",[t._v("由于 TypedArray 的构造函数可以指定起始位置和长度，所以在同一段内存之中，可以依次存放不同类型的数据。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" buffer "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ArrayBuffer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" idView "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uint32Array")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" usernameView "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Uint8Array")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" amountDueView "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Float32Array")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("上面代码将一个 24 字节长度的 ArrayBuffer 对象，分成三个部分：")]),t._v(" "),e("ul",[e("li",[t._v("字节 0 到字节 3：1 个 32 位无符号整数")]),t._v(" "),e("li",[t._v("字节 4 到字节 19：16 个 8 位整数")]),t._v(" "),e("li",[t._v("字节 20 到字节 23：1 个 32 位浮点数")])]),t._v(" "),e("h2",{attrs:{id:"dataview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dataview"}},[t._v("#")]),t._v(" DataView")]),t._v(" "),e("p",[t._v("DataView 是另一种操作 ArrayBuffer 的对象。")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/DataView",target:"_blank",rel:"noopener noreferrer"}},[t._v("DataView——MDN"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"内存分配"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内存分配"}},[t._v("#")]),t._v(" 内存分配")]),t._v(" "),e("p",[t._v("关于 ArrayBuffer 的内存分配可以看看这篇文章："),e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/133491261",target:"_blank",rel:"noopener noreferrer"}},[t._v("谈谈 ArrayBuffer 吧"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#应用"}},[t._v("#")]),t._v(" 应用")]),t._v(" "),e("h3",{attrs:{id:"canvas"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#canvas"}},[t._v("#")]),t._v(" Canvas")]),t._v(" "),e("p",[t._v("网页 Canvas 元素输出的二进制像素数据，就是类型化数组。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" canvas "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myCanvas"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ctx "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" canvas"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getContext")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2d"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" imageData "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getImageData")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" typedArray "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" imageData"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("需要注意的是，上面代码的 typedArray 虽然是一个类型化数组，但是它的视图类型是一种针对 Canvas 元素的专有类型 Uint8ClampedArray。")]),t._v(" "),e("p",[t._v("这个视图类型的特点，就是专门针对颜色，把每个字节解读为无符号的 8 位整数，即只能取值 0 ～ 255，而且发生运算的时候自动过滤高位溢出。这为图像处理带来了巨大的方便。")]),t._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.cnblogs.com/copperhaze/p/6149041.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript 之 ArrayBuffer"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",target:"_blank",rel:"noopener noreferrer"}},[t._v("ArrayBuffer"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypedArray"),e("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=s.exports}}]);