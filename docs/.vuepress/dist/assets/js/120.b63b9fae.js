(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{774:function(t,a,s){"use strict";s.r(a);var e=s(12),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Blob 对象表示一个不可变、原始数据的类文件对象。它的数据可以按文本或二进制的格式进行读取，也可以转换成 ReadableStream 来用于数据操作。")]),t._v(" "),s("p",[t._v("可以使用 Blob() 构造函数将其他非 blob 对象和数据构造成一个 Blob。")]),t._v(" "),s("p",[t._v("File 接口基于 Blob，继承了 blob 的功能并将其扩展使其支持用户系统上的文件。")]),t._v(" "),s("h2",{attrs:{id:"构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构造函数"}},[t._v("#")]),t._v(" 构造函数")]),t._v(" "),s("p",[t._v("Blob(blobParts[, options])")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("blobParts 是一个由 ArrayBuffer, ArrayBufferView, Blob, DOMString 等对象构成的 Array ，或者其他类似对象的混合体，它将会被放进 Blob。DOMStrings 会被编码为 UTF-8。")])]),t._v(" "),s("li",[s("p",[t._v("options 是一个可选的 BlobPropertyBag 字典，它可能会指定如下两个属性：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v('type，默认值为 ""，它代表了将会被放入到 blob 中的数组内容的 MIME 类型。')])]),t._v(" "),s("li",[s("p",[t._v('endings，默认值为"transparent"，用于指定包含行结束符\\n 的字符串如何被写入。 它是以下两个值中的一个： "native"，代表行结束符会被更改为适合宿主操作系统文件系统的换行符，或者 "transparent"，代表会保持 blob 中保存的结束符不变。')])])])])]),t._v(" "),s("h2",{attrs:{id:"属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#属性"}},[t._v("#")]),t._v(" 属性")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Blob.size")]),t._v(" "),s("p",[t._v("Blob 对象中所包含数据的大小（字节）。")])]),t._v(" "),s("li",[s("p",[t._v("Blob.type")]),t._v(" "),s("p",[t._v("一个字符串，表明该 Blob 对象所包含数据的 MIME 类型。如果类型未知，则该值为空字符串。")])])]),t._v(" "),s("h2",{attrs:{id:"方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法"}},[t._v("#")]),t._v(" 方法")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Blob.slice([start[, end[, contentType]]])")]),t._v(" "),s("p",[t._v("返回一个新的 Blob 对象，包含了源 Blob 对象中指定范围内的数据。")])]),t._v(" "),s("li",[s("p",[t._v("Blob.stream()")]),t._v(" "),s("p",[t._v("返回一个能读取 blob 内容的 ReadableStream。")])]),t._v(" "),s("li",[s("p",[t._v("Blob.text()")]),t._v(" "),s("p",[t._v("返回一个 promise 且包含 blob 所有内容的 UTF-8 格式的 USVString。")])]),t._v(" "),s("li",[s("p",[t._v("Blob.arrayBuffer()")]),t._v(" "),s("p",[t._v("返回一个 promise 且包含 blob 所有内容的二进制格式的 ArrayBuffer")])])]),t._v(" "),s("h2",{attrs:{id:"使用-blob"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-blob"}},[t._v("#")]),t._v(" 使用 Blob")]),t._v(" "),s("h3",{attrs:{id:"用-blob-创建-url"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用-blob-创建-url"}},[t._v("#")]),t._v(" 用 Blob 创建 url")]),t._v(" "),s("p",[t._v("适用 "),s("a",{attrs:{href:"/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/ECMAScript/URL?id=createobjecturlobject"}},[t._v("URL.createObjectURL")]),t._v(" 可以创建一个临时的 blob 链接，可以像使用普通 URL 那样使用它。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" typedArray "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("GetTheTypedArraySomehow")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" blob "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Blob")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("typedArray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("buffer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/octet-stream"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 传入一个合适的 MIME 类型")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createObjectURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会产生一个类似 blob:d3958f5c-0777-0845-9dcf-2cb28783acaf 这样的URL字符串")]),t._v("\n")])])]),s("h3",{attrs:{id:"用-filereader-读取-blob"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用-filereader-读取-blob"}},[t._v("#")]),t._v(" 用 FileReader 读取 Blob")]),t._v(" "),s("p",[s("a",{attrs:{href:"%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/ECMAScript/FileReader"}},[t._v("FileReader API")])]),t._v(" "),s("p",[t._v("reader.result 包含被转化为类型数组 typed array 的 blob。")]),t._v(" "),s("p",[t._v("通过使用 FileReader 的其它方法可以把 Blob 读取为字符串或者数据 URL。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reader "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileReader")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nreader"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readAsArrayBuffer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"用-response-读取-blob"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用-response-读取-blob"}},[t._v("#")]),t._v(" 用 Response 读取 Blob")]),t._v(" "),s("p",[s("a",{attrs:{href:"/%E6%8A%80%E6%9C%AF%E7%AC%94%E8%AE%B0/%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/ECMAScript/fetch?id=response-%E5%AF%B9%E8%B1%A1"}},[t._v("Response")]),t._v("对象与 fetch 中的 Response 是同一个对象。")]),t._v(" "),s("p",[t._v("下述代码将 Blob 中的内容读取为文本。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" res "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Response")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("blob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" text "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);