(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{854:function(a,t,e){"use strict";e.r(t);var s=e(12),n=Object(s.a)({},(function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("p",[a._v("npm 从 5.2 版开始，增加了 npx 命令。npx 是一个工具，一个 npm 包执行器，旨在提高从 npm 注册表使用软件包时的体验。")]),a._v(" "),e("h2",{attrs:{id:"调用项目安装的模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#调用项目安装的模块"}},[a._v("#")]),a._v(" 调用项目安装的模块")]),a._v(" "),e("p",[a._v("在 npx 之前，如果在项目中安装了一个模块，一般只能在项目脚本和 package.json 的 script 字段里面使用。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npm install -D mocha\n")])])]),e("p",[a._v("如果想在命令行使用 mocha 必须项下面这样。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 项目的根目录下执行\n$ node-modules/.bin/mocha --version\n")])])]),e("p",[a._v("npx 就是想解决这个问题，让项目内部安装的模块用起来更方便，只要像下面这样调用就行了。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npx mocha --version\n")])])]),e("p",[a._v("npx 的原理很简单，就是运行的时候，会到 node_modules/.bin 路径和环境变量$PATH 里面，检查命令是否存在。")]),a._v(" "),e("p",[a._v("由于 npx 会检查环境变量$PATH，所以系统命令也可以调用。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 等同于 ls\n$ npx ls\n")])])]),e("p",[a._v("注意，Bash 内置的命令不在$PATH 里面，所以不能用。比如，cd 是 Bash 命令，因此就不能用 npx cd。")]),a._v(" "),e("h2",{attrs:{id:"避免全局安装模块"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#避免全局安装模块"}},[a._v("#")]),a._v(" 避免全局安装模块")]),a._v(" "),e("p",[a._v("临时安装可执行依赖包，不用全局安装，不用担心长期的污染。")]),a._v(" "),e("p",[a._v("下面代码运行时，npx 将 create-react-app 下载到一个临时目录，使用以后再删除。所以，以后再次执行上面的命令，会重新下载 create-react-app。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npx create-react-app my-react-app\n")])])]),e("p",[a._v("只要 npx 后面的模块无法在本地发现，就会下载同名模块。")]),a._v(" "),e("h3",{attrs:{id:"自动安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自动安装"}},[a._v("#")]),a._v(" 自动安装")]),a._v(" "),e("p",[a._v("npx 可以执行依赖包中的命令，安装完成自动运行。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npx @vue/cli -V\n\n# 等价于\n\n$ npm install @vue/cli -g\n$ vue -V\n")])])]),e("h3",{attrs:{id:"no-install-参数和-ignore-existing-参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#no-install-参数和-ignore-existing-参数"}},[a._v("#")]),a._v(" --no-install 参数和--ignore-existing 参数")]),a._v(" "),e("p",[a._v("如果想让 npx 强制使用本地模块，不下载远程模块，可以使用--no-install 参数。如果本地不存在该模块，就会报错。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npx --no-install http-server\n")])])]),e("p",[a._v("如果忽略本地的同名模块，强制安装使用远程模块，可以使用--ignore-existing 参数。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npx --ignore-existing create-react-app my-react-app\n")])])]),e("h2",{attrs:{id:"指定-node-版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#指定-node-版本"}},[a._v("#")]),a._v(" 指定 node 版本")]),a._v(" "),e("p",[a._v("利用 npx 可以下载模块这个特点，可以指定某个版本的 Node 运行脚本。它的窍门就是使用 npm 的 node 模块。")]),a._v(" "),e("p",[a._v("这个特性解决了不同项目使用不同 node 版本的命令的问题。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ npx node@0.12.8 -v\n")])])]),e("h2",{attrs:{id:"执行-github-源码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#执行-github-源码"}},[a._v("#")]),a._v(" 执行 GitHub 源码")]),a._v(" "),e("p",[a._v("npx 还可以执行 GitHub 上面的模块源码。")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("# 执行 Gist 代码\n$ npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32\n\n# 执行仓库代码\n$ npx github:piuccio/cowsay hello\n")])])]),e("p",[a._v("注意，远程代码必须是一个模块，即必须包含 package.json 和入口脚本。")]),a._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[a._v("#")]),a._v(" 参考")]),a._v(" "),e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2019/02/npx.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("npx 使用教程——阮一峰"),e("OutboundLink")],1)]),a._v(" "),e("p",[e("a",{attrs:{href:"https://www.zhihu.com/question/327989736/answer/787995048",target:"_blank",rel:"noopener noreferrer"}},[a._v("npm 和 npx 有什么区别？"),e("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);