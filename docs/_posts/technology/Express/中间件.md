---
date: 2021-09-09 10:00:02
title: 中间件
tags:
  - myGit
  - learning-Notes
  - document
  - technology
  - Express
---

其实就是路由匹配时的处理函数

Express 应用程序本质上是一系列中间件函数调用

调用 `app.use()` 来使用中间件

处理程序接收三个参数, (`req`,`res`,`next`), 分别是请求参数, 响应参数, 回调参数

中间件可以绑定多个, 按照绑定顺序执行, 用 `next()` 来跳转到下一个中间件(处理函数)

如果当前的中间件功能没有结束请求-响应周期, 则必须调用 next()将控制权传递给下一个中间件功能, 否则请求将被挂起

```js
// 直接绑定处理函数
app.use(function(req, res, next) {});

// 通过封装实现可配置的中间件
function mw(option) {
  return (req, res, next) => {
    next();
  };
}

app.use(mw({}));
```
