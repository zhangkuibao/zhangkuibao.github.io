---
title: 优化打包速度
tags:
  - myGit
  - learning-Notes
  - document
  - technology
  - webpack
  - 技巧
---

## 将 loader 应用到最少数量的必要模块

只给需要用 loader 处理的文件使用 loader，需要将匹配规则尽可能地细致

通过使用 include 字段，仅将 loader 应用在实际需要将其转换的模块：

```js
const path = require("path");

module.exports = {
  //...
  module: {
    rules: [
      {
        test: /\.js$/,
        include: path.resolve(__dirname, "src"),
        loader: "babel-loader",
      },
    ],
  },
};
```

## dll

使用 DllPlugin 为更改不频繁的代码生成单独的编译结果。这可以提高应用程序的编译速度，尽管它增加了构建过程的复杂度。

## 减少编译结果整体大小

尽量保持 chunk 体积小。

- 使用数量更少/体积更小的 library。
- 在多页面应用程序中使用 SplitChunksPlugin ，并开启 async 模式。
- 移除未引用代码。
- 只编译你当前正在开发的那些代码。

## 避免在生产环境下才会用到的工具

某些 utility, plugin 和 loader 都只用于生产环境。例如，在开发环境下使用 TerserPlugin 来 minify(压缩) 和 mangle(混淆破坏) 代码是没有意义的。通常在开发环境下，应该排除以下这些工具：

- TerserPlugin
- [fullhash]/[chunkhash]/[contenthash]
- AggressiveSplittingPlugin
- AggressiveMergingPlugin
- ModuleConcatenationPlugin

## 避免额外的优化步骤

webpack 通过执行额外的算法任务，来优化输出结果的体积和加载性能。这些优化适用于小型代码库，但是在大型代码库中却非常耗费性能：

```js
module.exports = {
  // ...
  optimization: {
    removeAvailableModules: false,
    removeEmptyChunks: false,
    splitChunks: false,
  },
};
```
