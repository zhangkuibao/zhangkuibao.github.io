<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.51" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://zhangkuibao.github.io/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html"><meta property="og:site_name" content="ZHANGKB"><meta property="og:title" content="ã€ä»£ç ç‰‡æ®µã€‘JS"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-10-31T07:36:54.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="ä»£ç ç‰‡æ®µ"><meta property="article:published_time" content="2022-07-21T14:31:44.000Z"><meta property="article:modified_time" content="2022-10-31T07:36:54.000Z"><link rel="icon" href="/favicon.ico"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>ã€ä»£ç ç‰‡æ®µã€‘JS | ZHANGKB</title><meta name="description" content="">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.0220951c.css">
    <link rel="modulepreload" href="/assets/app.382dc3cd.js"><link rel="modulepreload" href="/assets/JS.html.d3bae718.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/JS.html.528ba1bf.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><!----><!----><span class="site-name">ZHANGKB</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="icon iconfont icon-home"></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/tools.html" class="nav-link" aria-label="åœ¨çº¿å·¥å…·"><span class="icon iconfont icon-home"></span>åœ¨çº¿å·¥å…·<!----></a></div><div class="nav-item hide-in-mobile"><a href="/tag" class="nav-link" aria-label="æ ‡ç­¾"><span class="icon iconfont icon-tag"></span>æ ‡ç­¾<!----></a></div><div class="nav-item hide-in-mobile"><a href="/category" class="nav-link" aria-label="ä¸“æ "><span class="icon iconfont icon-categoryselected"></span>ä¸“æ <!----></a></div><div class="nav-item hide-in-mobile"><a href="/timeline" class="nav-link" aria-label="æ—¶é—´è½´"><span class="icon iconfont icon-time"></span>æ—¶é—´è½´<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="è®¡åˆ’"><span class="title"><span class="icon iconfont icon-enum"></span>è®¡åˆ’</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/posts/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92-2023-11-22.html" class="nav-link" aria-label="å­¦ä¹ è®¡åˆ’-2023-11-22"><span class="icon iconfont icon-page"></span>å­¦ä¹ è®¡åˆ’-2023-11-22<!----></a></li><li class="dropdown-item"><a href="/posts/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92-2023-06-07.html" class="nav-link" aria-label="å­¦ä¹ è®¡åˆ’-2023-06-07"><span class="icon iconfont icon-page"></span>å­¦ä¹ è®¡åˆ’-2023-06-07<!----></a></li><li class="dropdown-item"><a href="/posts/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92/%E5%AD%A6%E4%B9%A0%E8%AE%A1%E5%88%92-2023-01-05.html" class="nav-link" aria-label="å­¦ä¹ è®¡åˆ’-2023-01-05"><span class="icon iconfont icon-page"></span>å­¦ä¹ è®¡åˆ’-2023-01-05<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label><span class="title"><span class="icon iconfont icon-more"></span></span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB.html" class="nav-link" aria-label="çŸ¥è¯†ä½“ç³»"><span class="icon iconfont icon-condition"></span>çŸ¥è¯†ä½“ç³»<!----></a></li><li class="dropdown-item"><a href="/%E7%AC%94%E8%AE%B0%E6%A8%A1%E6%9D%BF.html" class="nav-link" aria-label="ç¬”è®°æ¨¡æ¿"><span class="icon iconfont icon-page"></span>ç¬”è®°æ¨¡æ¿<!----></a></li><li class="dropdown-item"><a href="/%E4%B9%A6%E5%8D%95.html" class="nav-link" aria-label="ä¹¦å•"><span class="icon iconfont icon-list"></span>ä¹¦å•<!----></a></li><li class="dropdown-item"><a href="/diary.html" class="nav-link" aria-label="æ—¥è®°"><span class="icon iconfont icon-note"></span>æ—¥è®°<!----></a></li><li class="dropdown-item"><a href="/%E6%96%87%E6%91%98.html" class="nav-link" aria-label="æ–‡æ‘˜"><span class="icon iconfont icon-note"></span>æ–‡æ‘˜<!----></a></li><li class="dropdown-item"><a href="/inbox.html" class="nav-link" aria-label="inbox"><span class="icon iconfont icon-enum"></span>inbox<!----></a></li><li class="dropdown-item"><a href="/effects.html" class="nav-link" aria-label="æ ·å¼æ•ˆæœ"><span class="icon iconfont icon-style"></span>æ ·å¼æ•ˆæœ<!----></a></li><li class="dropdown-item"><a href="/collect.html" class="nav-link" aria-label="æ”¶è—å¤¹"><span class="icon iconfont icon-box"></span>æ”¶è—å¤¹<!----></a></li></ul></button></div></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://gitee.com/zhangkb/zhangkb.git" target="_blank" rel="noopener noreferrer" aria-label="Gitee"><svg xmlns="http://www.w3.org/2000/svg" class="icon gitee-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="gitee icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm242.97-533.34H482.39a23.7 23.7 0 0 0-23.7 23.7l-.03 59.28c0 13.08 10.59 23.7 23.7 23.7h165.96a23.7 23.7 0 0 1 23.7 23.7v11.85a71.1 71.1 0 0 1-71.1 71.1H375.71a23.7 23.7 0 0 1-23.7-23.7V423.11a71.1 71.1 0 0 1 71.1-71.1h331.8a23.7 23.7 0 0 0 23.7-23.7l.06-59.25a23.73 23.73 0 0 0-23.7-23.73H423.11a177.78 177.78 0 0 0-177.78 177.75v331.83c0 13.08 10.62 23.7 23.7 23.7h349.62a159.99 159.99 0 0 0 159.99-159.99V482.33a23.7 23.7 0 0 0-23.7-23.7z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><div id="docsearch-container"></div><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->ã€ä»£ç ç‰‡æ®µã€‘JS</h1><div class="page-info"><!----><span class="date-info" aria-label="å†™ä½œæ—¶é—´ğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022/07/21 14:31:44</span><meta property="datePublished" content="2022/07/21 14:31:44"></span><!----><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag2 clickable" role="navigation">ä»£ç ç‰‡æ®µ</li></ul><meta property="keywords" content="ä»£ç ç‰‡æ®µ"></span></div><!----><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å·¥å…·æ–¹æ³•" class="router-link-active router-link-exact-active toc-link level2">å·¥å…·æ–¹æ³•</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å¹¶å‘é™åˆ¶å™¨" class="router-link-active router-link-exact-active toc-link level3">å¹¶å‘é™åˆ¶å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#é˜²æŠ–èŠ‚æµ" class="router-link-active router-link-exact-active toc-link level3">é˜²æŠ–èŠ‚æµ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#ip-æ’åº" class="router-link-active router-link-exact-active toc-link level3">ip æ’åº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–æµè§ˆå™¨ä¿¡æ¯" class="router-link-active router-link-exact-active toc-link level3">è·å–æµè§ˆå™¨ä¿¡æ¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#ç”ŸæˆèŒƒå›´å†…éšæœºæ•°" class="router-link-active router-link-exact-active toc-link level3">ç”ŸæˆèŒƒå›´å†…éšæœºæ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–å›¾ç‰‡åŸå§‹å®½é«˜" class="router-link-active router-link-exact-active toc-link level3">è·å–å›¾ç‰‡åŸå§‹å®½é«˜</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è°ƒåº¦å™¨" class="router-link-active router-link-exact-active toc-link level3">è°ƒåº¦å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–é¡µé¢æ€§èƒ½æŒ‡æ ‡" class="router-link-active router-link-exact-active toc-link level3">è·å–é¡µé¢æ€§èƒ½æŒ‡æ ‡</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#æ—¥æœŸ" class="router-link-active router-link-exact-active toc-link level2">æ—¥æœŸ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–æ—¶é—´æ—¥æœŸå­—ç¬¦ä¸²" class="router-link-active router-link-exact-active toc-link level3">è·å–æ—¶é—´æ—¥æœŸå­—ç¬¦ä¸²</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#æ•°ç»„" class="router-link-active router-link-exact-active toc-link level2">æ•°ç»„</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#æ•°ç»„æŒ‰æŒ‡å®šé¡ºåºæ’åº" class="router-link-active router-link-exact-active toc-link level3">æ•°ç»„æŒ‰æŒ‡å®šé¡ºåºæ’åº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å¤šå±‚æ•°ç»„æ‰å¹³åŒ–" class="router-link-active router-link-exact-active toc-link level3">å¤šå±‚æ•°ç»„æ‰å¹³åŒ–</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å­—ç¬¦ä¸²" class="router-link-active router-link-exact-active toc-link level2">å­—ç¬¦ä¸²</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å°†å­—ç¬¦ä¸²æŒ‰ç…§æ•°å­—åˆ†éš”" class="router-link-active router-link-exact-active toc-link level3">å°†å­—ç¬¦ä¸²æŒ‰ç…§æ•°å­—åˆ†éš”</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å‰ç½®é›¶è¡¥è‡³æŒ‡å®šä½æ•°" class="router-link-active router-link-exact-active toc-link level3">å‰ç½®é›¶è¡¥è‡³æŒ‡å®šä½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#äº¤æ¢å­—ç¬¦ä¸²ä¸­çš„ä¸¤ä¸ªå•è¯" class="router-link-active router-link-exact-active toc-link level3">äº¤æ¢å­—ç¬¦ä¸²ä¸­çš„ä¸¤ä¸ªå•è¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#åƒåˆ†ä½" class="router-link-active router-link-exact-active toc-link level3">åƒåˆ†ä½</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#cookie" class="router-link-active router-link-exact-active toc-link level2">Cookie</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è®¾ç½®æŒ‡å®š-cookie-å€¼" class="router-link-active router-link-exact-active toc-link level3">è®¾ç½®æŒ‡å®š cookie å€¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–æŒ‡å®š-cookie-å€¼" class="router-link-active router-link-exact-active toc-link level3">è·å–æŒ‡å®š cookie å€¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#æ£€æµ‹æŒ‡å®š-cookie-å€¼" class="router-link-active router-link-exact-active toc-link level3">æ£€æµ‹æŒ‡å®š cookie å€¼</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#dom" class="router-link-active router-link-exact-active toc-link level2">DOM</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–å…ƒç´ ç›¸å¯¹äºé¡µé¢çš„ä½ç½®" class="router-link-active router-link-exact-active toc-link level3">è·å–å…ƒç´ ç›¸å¯¹äºé¡µé¢çš„ä½ç½®</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#æ•°æ®" class="router-link-active router-link-exact-active toc-link level2">æ•°æ®</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#blob-è½¬-base64" class="router-link-active router-link-exact-active toc-link level3">blob è½¬ base64</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#ä¸šåŠ¡åŠŸèƒ½" class="router-link-active router-link-exact-active toc-link level2">ä¸šåŠ¡åŠŸèƒ½</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å½•åˆ¶å±å¹•" class="router-link-active router-link-exact-active toc-link level3">å½•åˆ¶å±å¹•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·å–å®¢æˆ·ç«¯-ip-åœ°å€" class="router-link-active router-link-exact-active toc-link level3">è·å–å®¢æˆ·ç«¯ IP åœ°å€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#app-åˆ†äº«é“¾æ¥" class="router-link-active router-link-exact-active toc-link level3">App åˆ†äº«é“¾æ¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#å‰ªè´´æ¿" class="router-link-active router-link-exact-active toc-link level3">å‰ªè´´æ¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/JS.html#è·³è½¬åˆ°å¾®ä¿¡" class="router-link-active router-link-exact-active toc-link level3">è·³è½¬åˆ°å¾®ä¿¡</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="å·¥å…·æ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#å·¥å…·æ–¹æ³•" aria-hidden="true">#</a> å·¥å…·æ–¹æ³•</h2><h3 id="å¹¶å‘é™åˆ¶å™¨" tabindex="-1"><a class="header-anchor" href="#å¹¶å‘é™åˆ¶å™¨" aria-hidden="true">#</a> å¹¶å‘é™åˆ¶å™¨</h3><p>åŒæ—¶æ‰§è¡Œå¤§é‡ä»»åŠ¡ä¼šå¯¹ <code>cpu</code> é€ æˆå‹åŠ›ï¼Œè¿›è¡Œæµæ“ä½œæ—¶ä¼šå¯¼è‡´æ‰€æœ‰ä»»åŠ¡è¿›åº¦ç¼“æ…¢ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">TaskParallelLimiter</span> <span class="token punctuation">{</span>
  taskList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å¾…åŠäº‹ä»¶åˆ—è¡¨</span>
  activeThreadAmount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  maxThreadAmount <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  host <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">host <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">,</span> limit <span class="token operator">=</span> <span class="token number">5</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>host <span class="token operator">=</span> host<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxThreadAmount <span class="token operator">=</span> limit<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// æ·»åŠ äº‹ä»¶</span>
  <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">fnName<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> task <span class="token operator">=</span> <span class="token function">fnName</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>host<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> _t <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">packingTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      _t<span class="token punctuation">.</span>activeThreadAmount<span class="token operator">++</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        _t<span class="token punctuation">.</span>activeThreadAmount<span class="token operator">--</span><span class="token punctuation">;</span>
        <span class="token function">nextTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">nextTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_t<span class="token punctuation">.</span>activeThreadAmount <span class="token operator">&lt;</span> _t<span class="token punctuation">.</span>maxThreadAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> next <span class="token operator">=</span> _t<span class="token punctuation">.</span>taskList<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">nextTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>activeThreadAmount <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxThreadAmount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">packingTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>taskList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>packingTask<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>TaskParallelLimiter(host, limit)</code> æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>hostï¼šæ·»åŠ ä»»åŠ¡æ—¶ä¼šå°†æ–¹æ³•çš„ <code>this</code> æŒ‡å‘ <code>host</code>ã€‚</li><li>limitï¼šæœ€å¤§å¹¶å‘æ•°ã€‚</li></ul><p>è¢« <code>taskLimiter.push()</code> æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—çš„æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> taskLimiter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TaskParallelLimiter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> len <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>len<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  taskLimiter<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é˜²æŠ–èŠ‚æµ" tabindex="-1"><a class="header-anchor" href="#é˜²æŠ–èŠ‚æµ" aria-hidden="true">#</a> é˜²æŠ–èŠ‚æµ</h3><h4 id="é˜²æŠ–å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#é˜²æŠ–å‡½æ•°" aria-hidden="true">#</a> é˜²æŠ–å‡½æ•°</h4><p>åœ¨å»¶è¿ŸèŒƒå›´å†…é‡å¤è°ƒç”¨åªæ‰§è¡Œæœ€åä¸€æ¬¡ã€‚</p><ul><li>ä¸€å‚ï¼šå¾…æ‰§è¡Œå‡½æ•°ã€‚</li><li>äºŒå‚ï¼šå»¶è¿Ÿå¤šä¹…åæ‰§è¡Œã€‚</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">antiShake</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> interval <span class="token operator">=</span> <span class="token number">300</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timmer<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timmer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timmer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> interval<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span>onresize <span class="token operator">=</span> <span class="token function">antiShake</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="èŠ‚æµå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#èŠ‚æµå‡½æ•°" aria-hidden="true">#</a> èŠ‚æµå‡½æ•°</h4><p>åœ¨å»¶è¿Ÿæ—¶é—´åæ‰å¯å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p><ul><li>ä¸€å‚ï¼šå¾…æ‰§è¡Œå‡½æ•°ã€‚</li><li>äºŒå‚ï¼šå»¶è¿Ÿå¤šä¹…åå¯å†æ¬¡æ‰§è¡Œã€‚</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> interval <span class="token operator">=</span> <span class="token number">300</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> canExecute <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> timmer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>canExecute<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      canExecute <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      timmer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        canExecute <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        timmer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span>onresize <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ip-æ’åº" tabindex="-1"><a class="header-anchor" href="#ip-æ’åº" aria-hidden="true">#</a> ip æ’åº</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ipæ’åº</span>
<span class="token keyword">function</span> <span class="token function">ipsSort</span><span class="token punctuation">(</span><span class="token parameter">ips</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ips =  [&quot;10.10.15.130&quot;, &quot;10.10.16.40&quot;, &quot;127.0.0.1&quot;, &quot;192.168.1.123&quot;, &quot;192.168.1.38&quot;, &quot;192.168.1.39&quot;];</span>
  <span class="token comment">// å‡åº</span>
  ips<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºæ ¼ä¼šå½±å“æ’åº</span>
    b <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> arr1 <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> arr2 <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>arr1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ips<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·å–æµè§ˆå™¨ä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·å–æµè§ˆå™¨ä¿¡æ¯" aria-hidden="true">#</a> è·å–æµè§ˆå™¨ä¿¡æ¯</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·å–æµè§ˆå™¨ä¿¡æ¯</span>
<span class="token keyword">function</span> <span class="token function">getBrowserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> inBrowser <span class="token operator">=</span> <span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> inWeex <span class="token operator">=</span> <span class="token keyword">typeof</span> WXEnvironment <span class="token operator">!==</span> <span class="token string">&quot;undefined&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token operator">!</span>WXEnvironment<span class="token punctuation">.</span>platform<span class="token punctuation">;</span>
  <span class="token keyword">var</span> weexPlatform <span class="token operator">=</span> inWeex <span class="token operator">&amp;&amp;</span> WXEnvironment<span class="token punctuation">.</span>platform<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> <span class="token constant">UA</span> <span class="token operator">=</span> inBrowser <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isIE <span class="token operator">=</span> <span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">msie|trident</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token constant">UA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isIE9 <span class="token operator">=</span> <span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">UA</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;msie 9.0&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isEdge <span class="token operator">=</span> <span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">UA</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;edge/&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isAndroid <span class="token operator">=</span>
    <span class="token punctuation">(</span><span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">UA</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;android&quot;</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> weexPlatform <span class="token operator">===</span> <span class="token string">&quot;android&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isIOS <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iphone|ipad|ipod|ios</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token constant">UA</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> weexPlatform <span class="token operator">===</span> <span class="token string">&quot;ios&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isChrome <span class="token operator">=</span> <span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">chrome\/\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token constant">UA</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isEdge<span class="token punctuation">;</span>
  <span class="token keyword">var</span> isPhantomJS <span class="token operator">=</span> <span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">phantomjs</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token constant">UA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> isFF <span class="token operator">=</span> <span class="token constant">UA</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">UA</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">firefox\/(\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    inBrowser<span class="token punctuation">,</span>
    inWeex<span class="token punctuation">,</span>
    weexPlatform<span class="token punctuation">,</span>
    <span class="token constant">UA</span><span class="token punctuation">,</span>
    isIE<span class="token punctuation">,</span>
    isIE9<span class="token punctuation">,</span>
    isEdge<span class="token punctuation">,</span>
    isAndroid<span class="token punctuation">,</span>
    isIOS<span class="token punctuation">,</span>
    isChrome<span class="token punctuation">,</span>
    isPhantomJS<span class="token punctuation">,</span>
    isFF<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç”ŸæˆèŒƒå›´å†…éšæœºæ•°" tabindex="-1"><a class="header-anchor" href="#ç”ŸæˆèŒƒå›´å†…éšæœºæ•°" aria-hidden="true">#</a> ç”ŸæˆèŒƒå›´å†…éšæœºæ•°</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ç”ŸæˆèŒƒå›´å†…çš„éšæœºæ•°</span>
<span class="token keyword">function</span> <span class="token function">getRandom</span><span class="token punctuation">(</span><span class="token parameter">min <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token number">255</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·å–å›¾ç‰‡åŸå§‹å®½é«˜" tabindex="-1"><a class="header-anchor" href="#è·å–å›¾ç‰‡åŸå§‹å®½é«˜" aria-hidden="true">#</a> è·å–å›¾ç‰‡åŸå§‹å®½é«˜</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·å–å›¾ç‰‡åŸå§‹å®½é«˜</span>
<span class="token keyword">function</span> <span class="token function">loadImageAsync</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">w</span><span class="token operator">:</span> image<span class="token punctuation">.</span>naturalWidth<span class="token punctuation">,</span>
        <span class="token literal-property property">h</span><span class="token operator">:</span> image<span class="token punctuation">.</span>naturalHeight<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    image<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Could not load image at &quot;</span> <span class="token operator">+</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è°ƒåº¦å™¨" tabindex="-1"><a class="header-anchor" href="#è°ƒåº¦å™¨" aria-hidden="true">#</a> è°ƒåº¦å™¨</h3><p>**é¢˜ç›®æè¿°ï¼š**å®ç°ä¸€ä¸ªå¸¦å¹¶å‘é™åˆ¶çš„å¼‚æ­¥è°ƒåº¦å™¨ï¼Œä¿è¯åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æœ€å¤šæœ‰ä¸¤ä¸ªã€‚å®Œå–„ä¸‹é¢ä»£ç ä¸­çš„ <code>Scheduler</code> ç±»ï¼Œä½¿å¾—ç¨‹åºèƒ½æ­£å¸¸è¾“å‡ºã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Scheduler</span> <span class="token punctuation">{</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">promiseCreator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">timeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> scheduler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">addTask</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> order</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  scheduler<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timeout</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addTask</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// è¾“å‡ºï¼š2 3 1 4</span>
<span class="token comment">// ä¸€å¼€å§‹ï¼Œ1ã€2ä¸¤ä¸ªä»»åŠ¡è¿›å…¥é˜Ÿåˆ—</span>
<span class="token comment">// 500msæ—¶ï¼Œ2å®Œæˆï¼Œè¾“å‡º2ï¼Œä»»åŠ¡3è¿›é˜Ÿ</span>
<span class="token comment">// 800msæ—¶ï¼Œ3å®Œæˆï¼Œè¾“å‡º3ï¼Œä»»åŠ¡4è¿›é˜Ÿ</span>
<span class="token comment">// 1000msæ—¶ï¼Œ1å®Œæˆï¼Œè¾“å‡º1</span>
<span class="token comment">// 1200msæ—¶ï¼Œ4å®Œæˆï¼Œè¾“å‡º4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä»£ç å®ç°ï¼š</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Scheduler</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">maxNum</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxNum <span class="token operator">=</span> maxNum<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>taskList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// å¾…æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// å½“å‰æ‰§è¡Œæ•°</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">promiseCreator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å…¥æ ˆå‡½æ•°</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>maxNum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>taskList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å½“resolveè¢«æ‰§è¡Œæ—¶æ‰ä¼šæ¥ç€æ‰§è¡Œ</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">promiseCreator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰§è¡Œå®šæ—¶å™¨,å³() =&gt; timeout(time), è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>taskList<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>taskList<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å¾…æ‰§è¡Œé˜Ÿåˆ—ä¸­æœ‰å€¼çš„è¯å–å‡ºç¬¬ä¸€ä¸ªå¹¶æ‰§è¡Œ(è¿™é‡Œå–å‡ºæ¥çš„æ˜¯ä¸Šé¢çš„resolve,æ‰§è¡Œä¹‹åè¯¥resolveå¯¹åº”çš„å‡½æ•°å°±å¼€å§‹æ‰§è¡Œ)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·å–é¡µé¢æ€§èƒ½æŒ‡æ ‡" tabindex="-1"><a class="header-anchor" href="#è·å–é¡µé¢æ€§èƒ½æŒ‡æ ‡" aria-hidden="true">#</a> è·å–é¡µé¢æ€§èƒ½æŒ‡æ ‡</h3><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://fecommunity.github.io/front-end-interview/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/8.performance%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7.html" target="_blank" rel="noopener noreferrer">å‰ç«¯æ€§èƒ½ç›‘æ§æŒ‡æ ‡<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getPerformanceTiming</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> performance <span class="token operator">=</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>performance<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“å‰æµè§ˆå™¨ä¸æ”¯æŒ</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ performance æ¥å£&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">var</span> t <span class="token operator">=</span> performance<span class="token punctuation">.</span>timing<span class="token punctuation">;</span>
  <span class="token keyword">var</span> times <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘é¡µé¢åŠ è½½å®Œæˆçš„æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘è¿™å‡ ä¹ä»£è¡¨äº†ç”¨æˆ·ç­‰å¾…é¡µé¢å¯ç”¨çš„æ—¶é—´</span>
  times<span class="token punctuation">.</span>loadPage <span class="token operator">=</span> t<span class="token punctuation">.</span>loadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘è§£æ DOM æ ‘ç»“æ„çš„æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘åçœä¸‹ä½ çš„ DOM æ ‘åµŒå¥—æ˜¯ä¸æ˜¯å¤ªå¤šäº†ï¼</span>
  times<span class="token punctuation">.</span>domReady <span class="token operator">=</span> t<span class="token punctuation">.</span>domComplete <span class="token operator">-</span> t<span class="token punctuation">.</span>responseEnd<span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘é‡å®šå‘çš„æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘æ‹’ç»é‡å®šå‘ï¼æ¯”å¦‚ï¼Œhttp://example.com/ å°±ä¸è¯¥å†™æˆ http://example.com</span>
  times<span class="token punctuation">.</span>redirect <span class="token operator">=</span> t<span class="token punctuation">.</span>redirectEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>redirectStart<span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘DNS æŸ¥è¯¢æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘DNS é¢„åŠ è½½åšäº†ä¹ˆï¼Ÿé¡µé¢å†…æ˜¯ä¸æ˜¯ä½¿ç”¨äº†å¤ªå¤šä¸åŒçš„åŸŸåå¯¼è‡´åŸŸåæŸ¥è¯¢çš„æ—¶é—´å¤ªé•¿ï¼Ÿ</span>
  <span class="token comment">// å¯ä½¿ç”¨ HTML5 Prefetch é¢„æŸ¥è¯¢ DNS ï¼Œè§ï¼š[HTML5 prefetch](http://segmentfault.com/a/1190000000633364)</span>
  times<span class="token punctuation">.</span>lookupDomain <span class="token operator">=</span> t<span class="token punctuation">.</span>domainLookupEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>domainLookupStart<span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘è¯»å–é¡µé¢ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘è¿™å¯ä»¥ç†è§£ä¸ºç”¨æˆ·æ‹¿åˆ°ä½ çš„èµ„æºå ç”¨çš„æ—¶é—´ï¼ŒåŠ å¼‚åœ°æœºæˆ¿äº†ä¹ˆï¼ŒåŠ CDN å¤„ç†äº†ä¹ˆï¼ŸåŠ å¸¦å®½äº†ä¹ˆï¼ŸåŠ  CPU è¿ç®—é€Ÿåº¦äº†ä¹ˆï¼Ÿ</span>
  <span class="token comment">// TTFB å³ Time To First Byte çš„æ„æ€</span>
  <span class="token comment">// ç»´åŸºç™¾ç§‘ï¼šhttps://en.wikipedia.org/wiki/Time_To_First_Byte</span>
  times<span class="token punctuation">.</span>ttfb <span class="token operator">=</span> t<span class="token punctuation">.</span>responseStart <span class="token operator">-</span> t<span class="token punctuation">.</span>navigationStart<span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘å†…å®¹åŠ è½½å®Œæˆçš„æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘é¡µé¢å†…å®¹ç»è¿‡ gzip å‹ç¼©äº†ä¹ˆï¼Œé™æ€èµ„æº css/js ç­‰å‹ç¼©äº†ä¹ˆï¼Ÿ</span>
  times<span class="token punctuation">.</span>request <span class="token operator">=</span> t<span class="token punctuation">.</span>responseEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>requestStart<span class="token punctuation">;</span>

  <span class="token comment">//ã€é‡è¦ã€‘æ‰§è¡Œ onload å›è°ƒå‡½æ•°çš„æ—¶é—´</span>
  <span class="token comment">//ã€åŸå› ã€‘æ˜¯å¦å¤ªå¤šä¸å¿…è¦çš„æ“ä½œéƒ½æ”¾åˆ° onload å›è°ƒå‡½æ•°é‡Œæ‰§è¡Œäº†ï¼Œè€ƒè™‘è¿‡å»¶è¿ŸåŠ è½½ã€æŒ‰éœ€åŠ è½½çš„ç­–ç•¥ä¹ˆï¼Ÿ</span>
  times<span class="token punctuation">.</span>loadEvent <span class="token operator">=</span> t<span class="token punctuation">.</span>loadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>loadEventStart<span class="token punctuation">;</span>

  <span class="token comment">// DNS ç¼“å­˜æ—¶é—´</span>
  times<span class="token punctuation">.</span>appcache <span class="token operator">=</span> t<span class="token punctuation">.</span>domainLookupStart <span class="token operator">-</span> t<span class="token punctuation">.</span>fetchStart<span class="token punctuation">;</span>

  <span class="token comment">// å¸è½½é¡µé¢çš„æ—¶é—´</span>
  times<span class="token punctuation">.</span>unloadEvent <span class="token operator">=</span> t<span class="token punctuation">.</span>unloadEventEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>unloadEventStart<span class="token punctuation">;</span>

  <span class="token comment">// TCP å»ºç«‹è¿æ¥å®Œæˆæ¡æ‰‹çš„æ—¶é—´</span>
  times<span class="token punctuation">.</span>connect <span class="token operator">=</span> t<span class="token punctuation">.</span>connectEnd <span class="token operator">-</span> t<span class="token punctuation">.</span>connectStart<span class="token punctuation">;</span>

  <span class="token keyword">return</span> times<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ—¥æœŸ" tabindex="-1"><a class="header-anchor" href="#æ—¥æœŸ" aria-hidden="true">#</a> æ—¥æœŸ</h2><h3 id="è·å–æ—¶é—´æ—¥æœŸå­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#è·å–æ—¶é—´æ—¥æœŸå­—ç¬¦ä¸²" aria-hidden="true">#</a> è·å–æ—¶é—´æ—¥æœŸå­—ç¬¦ä¸²</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getFullTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//æ—¶é—´æˆ³ä¸º10ä½éœ€*1000ï¼Œæ—¶é—´æˆ³ä¸º13ä½çš„è¯ä¸éœ€ä¹˜1000</span>
    <span class="token constant">Y</span> <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token constant">M</span> <span class="token operator">=</span>
      date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">10</span>
        <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token constant">D</span> <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    h <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    m <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    s <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">Y</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">M</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">D</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>h<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>m<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>s<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„" aria-hidden="true">#</a> æ•°ç»„</h2><h3 id="æ•°ç»„æŒ‰æŒ‡å®šé¡ºåºæ’åº" tabindex="-1"><a class="header-anchor" href="#æ•°ç»„æŒ‰æŒ‡å®šé¡ºåºæ’åº" aria-hidden="true">#</a> æ•°ç»„æŒ‰æŒ‡å®šé¡ºåºæ’åº</h3><ul><li>ä¸€å‚ï¼šç›®æ ‡æ•°ç»„ã€‚</li><li>äºŒå‚ï¼šæ’åºè§„åˆ™ï¼Œä¸€å‚ä¸­çš„æ•°ç»„æŒ‰ç…§è¿™ä¸ªæ•°ç»„å…ƒç´ é¡ºåºæ’åºã€‚</li><li>ä¸‰å‚ï¼šè¢«æ’åºå…ƒç´ ç›¸å¯¹å…¶ä»–å…ƒç´ çš„ä½ç½®ï¼Œé»˜è®¤æ”¾åœ¨å…¶ä»–å…ƒç´ åé¢ã€‚</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">arrLaggingSort</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> sortList<span class="token punctuation">,</span> insertHead <span class="token operator">=</span> <span class="token boolean">false</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>insertHead<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sortList<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  sortList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> index <span class="token operator">=</span> target<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      target<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>insertHead<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> target<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç¤ºä¾‹</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sortList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">arrLaggingSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sortList<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 5, 1, 2, 4, 6]</span>
<span class="token function">arrLaggingSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sortList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[(1, 2, 4, 6, 3, 5)];</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤šå±‚æ•°ç»„æ‰å¹³åŒ–" tabindex="-1"><a class="header-anchor" href="#å¤šå±‚æ•°ç»„æ‰å¹³åŒ–" aria-hidden="true">#</a> å¤šå±‚æ•°ç»„æ‰å¹³åŒ–</h3><blockquote><p>reduce å‡½æ•°ä¸æ¥æ”¶äºŒå‚æ—¶ï¼Œå›è°ƒå‡½æ•°çš„ä¸€å‚æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä½ï¼ŒäºŒå‚æ˜¯ç¬¬äºŒä½</p><p>æ¥æ”¶äºŒå‚æ—¶ï¼Œreduce å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯è¾“å…¥çš„å‚æ•°ï¼ŒäºŒå‚æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä½</p></blockquote><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">flattenDeep</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> _val <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">flattenDeep</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span>cur<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>acc<span class="token punctuation">,</span> <span class="token operator">...</span>_val<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">flattenDeep</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">234</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">342</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">999</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#å­—ç¬¦ä¸²" aria-hidden="true">#</a> å­—ç¬¦ä¸²</h2><h3 id="å°†å­—ç¬¦ä¸²æŒ‰ç…§æ•°å­—åˆ†éš”" tabindex="-1"><a class="header-anchor" href="#å°†å­—ç¬¦ä¸²æŒ‰ç…§æ•°å­—åˆ†éš”" aria-hidden="true">#</a> å°†å­—ç¬¦ä¸²æŒ‰ç…§æ•°å­—åˆ†éš”</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">strListGenerator</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> matchList <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>matchList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    matchList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">numberStr<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>numberStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>
        <span class="token function">createStrNode</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">createStrNode</span><span class="token punctuation">(</span>numberStr<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">createStrNode</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      str <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">createStrNode</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> str <span class="token operator">=</span>
  <span class="token string">&quot;æ‚¨çš„è®¢å•å·²æ´¾é€ï¼Œè¯·ä¿æŒæ‚¨çš„ç”µè¯ç•…é€šã€‚æŸ¥è¯¢é…é€è¿›sssåº¦ï¼Œå¯æ‹¨æ‰“ï¼š10010ã€‚&quot;</span><span class="token punctuation">;</span>
<span class="token function">strListGenerator</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{string: &#39;...&#39;, isNumber: false},{string: &#39;10010&#39;, isNumber: true}]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‰ç½®é›¶è¡¥è‡³æŒ‡å®šä½æ•°" tabindex="-1"><a class="header-anchor" href="#å‰ç½®é›¶è¡¥è‡³æŒ‡å®šä½æ•°" aria-hidden="true">#</a> å‰ç½®é›¶è¡¥è‡³æŒ‡å®šä½æ•°</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/*
 *åŠŸèƒ½: {åœ¨å­—ç¬¦ä¸²å‰ä»¥0è¡¥å…¨æŒ‡å®šä½æ•°}
 *è¾“å…¥: {number}    (åŸæ•°æ®,æŒ‡å®šä½æ•°)
 *è¾“å‡º: {string}	&quot;04&quot;
 */</span>
<span class="token keyword">function</span> <span class="token function">supNumber</span><span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&lt;</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span> <span class="token operator">+</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="äº¤æ¢å­—ç¬¦ä¸²ä¸­çš„ä¸¤ä¸ªå•è¯" tabindex="-1"><a class="header-anchor" href="#äº¤æ¢å­—ç¬¦ä¸²ä¸­çš„ä¸¤ä¸ªå•è¯" aria-hidden="true">#</a> äº¤æ¢å­—ç¬¦ä¸²ä¸­çš„ä¸¤ä¸ªå•è¯</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\w+)\s(\w+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;John Smith&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newstr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>re<span class="token punctuation">,</span> <span class="token string">&quot;$2, $1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Smith, John</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åƒåˆ†ä½" tabindex="-1"><a class="header-anchor" href="#åƒåˆ†ä½" aria-hidden="true">#</a> åƒåˆ†ä½</h3><p>åƒåˆ†ä½ï¼ˆä¸‰ä½ä¸€åˆ†ï¼‰ï¼š2,123,456,789</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1.åƒåˆ†ä½ï¼ˆä¸‰ä½ä¸€åˆ†ï¼‰ï¼š2,123,456,789</span>
<span class="token comment">// æ€è·¯ï¼šåªè¦å­—ç¬¦ä¸²é•¿åº¦å¤§äºä¸‰å°±è£å‰ªåä¸‰ä½å¹¶æ›´æ–°å­—ç¬¦ä¸²ï¼Œé€šè¿‡ç´¯åŠ å®ç°</span>
<span class="token keyword">function</span> <span class="token function">toThousands</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token punctuation">(</span>num <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// å°†ä¼ å…¥æ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>num<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åªè¦å­—ç¬¦ä¸²é•¿åº¦å¤§äºä¸‰å°±æ‰§è¡Œ</span>
    <span class="token comment">// -----------------------------------------------------------------------</span>
    result <span class="token operator">=</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> num<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> result<span class="token punctuation">;</span> <span class="token comment">// &#39;,&#39; + åä¸‰ä½å€¼ + ä¹‹å‰ç´¯åŠ çš„å€¼</span>
    <span class="token comment">// -----------------------------------------------------------------------</span>
    <span class="token comment">// å°†å­—ç¬¦ä¸²åä¸‰ä½è£å‰ªå¹¶åŠ å…¥æœ€ç»ˆçš„å­—ç¬¦ä¸²</span>
    num <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> num<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// æ›´æ–°å­—ç¬¦ä¸²é•¿åº¦</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> num <span class="token operator">+</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h2><h3 id="è®¾ç½®æŒ‡å®š-cookie-å€¼" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®æŒ‡å®š-cookie-å€¼" aria-hidden="true">#</a> è®¾ç½®æŒ‡å®š cookie å€¼</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token parameter">cname<span class="token punctuation">,</span> cvalue<span class="token punctuation">,</span> exdays</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  d<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> exdays <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> expires <span class="token operator">=</span> <span class="token string">&quot;expires=&quot;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span><span class="token function">toGMTString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> cname <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> cvalue <span class="token operator">+</span> <span class="token string">&quot;; &quot;</span> <span class="token operator">+</span> expires<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·å–æŒ‡å®š-cookie-å€¼" tabindex="-1"><a class="header-anchor" href="#è·å–æŒ‡å®š-cookie-å€¼" aria-hidden="true">#</a> è·å–æŒ‡å®š cookie å€¼</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token parameter">cname</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> cname <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> ca <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ca<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> ca<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span>length<span class="token punctuation">,</span> c<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ£€æµ‹æŒ‡å®š-cookie-å€¼" tabindex="-1"><a class="header-anchor" href="#æ£€æµ‹æŒ‡å®š-cookie-å€¼" aria-hidden="true">#</a> æ£€æµ‹æŒ‡å®š cookie å€¼</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">checkCookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> username <span class="token operator">=</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;Welcome again &quot;</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    username <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;Please enter your name:&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>username <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> username <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setCookie</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> username<span class="token punctuation">,</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dom" tabindex="-1"><a class="header-anchor" href="#dom" aria-hidden="true">#</a> DOM</h2><h3 id="è·å–å…ƒç´ ç›¸å¯¹äºé¡µé¢çš„ä½ç½®" tabindex="-1"><a class="header-anchor" href="#è·å–å…ƒç´ ç›¸å¯¹äºé¡µé¢çš„ä½ç½®" aria-hidden="true">#</a> è·å–å…ƒç´ ç›¸å¯¹äºé¡µé¢çš„ä½ç½®</h3><p>å…ƒç´ ç›¸å¯¹äºé¡µé¢çš„ä½ç½® = å…ƒç´ çš„ç›¸å¯¹ä½ç½®ä¸å®ƒæ‰€æœ‰çˆ¶å…ƒç´ çš„ç›¸å¯¹ä½ç½®çš„ç´¯åŠ ä¹‹å’Œã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getOffsetByDom</span><span class="token punctuation">(</span><span class="token parameter">elem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> left <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">,</span>
    top <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>elem <span class="token operator">=</span> elem<span class="token punctuation">.</span>offsetParent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    left <span class="token operator">+=</span> elem<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
    top <span class="token operator">+=</span> elem<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">,</span>
    top<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æ•°æ®" tabindex="-1"><a class="header-anchor" href="#æ•°æ®" aria-hidden="true">#</a> æ•°æ®</h2><h3 id="blob-è½¬-base64" tabindex="-1"><a class="header-anchor" href="#blob-è½¬-base64" aria-hidden="true">#</a> blob è½¬ base64</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/** blobè½¬base64 */</span>
<span class="token keyword">function</span> <span class="token function">blobToBase64</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>blob <span class="token keyword">instanceof</span> <span class="token class-name">Blob</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åˆ¤æ–­æ˜¯å¦ä¸ºblobç±»å‹</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fileReader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      fileReader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
      fileReader<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;blobToBase64 error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ä¸šåŠ¡åŠŸèƒ½" tabindex="-1"><a class="header-anchor" href="#ä¸šåŠ¡åŠŸèƒ½" aria-hidden="true">#</a> ä¸šåŠ¡åŠŸèƒ½</h2><h3 id="å½•åˆ¶å±å¹•" tabindex="-1"><a class="header-anchor" href="#å½•åˆ¶å±å¹•" aria-hidden="true">#</a> å½•åˆ¶å±å¹•</h3><h4 id="æ€è·¯" tabindex="-1"><a class="header-anchor" href="#æ€è·¯" aria-hidden="true">#</a> æ€è·¯</h4><ol><li>ç”¨ navigator.mediaDevices.getDisplayMedia è·å–åˆ°å½•åˆ¶æƒé™åå¾—åˆ° MediaStreamã€‚</li><li>ç”¨ new MediaRecorder(MediaStream) åˆ›å»ºä¸€ä¸ªåª’ä½“å½•åˆ¶çš„å®¹å™¨ã€‚</li><li>ä½¿ç”¨ MediaRecorder çš„ API å®Œæˆå½•åˆ¶åä¿å­˜æ•°æ®ï¼ˆblob æ ¼å¼ï¼‰ã€‚</li><li>ç”¨ URL.createObjectURL(blob) åˆ›å»º blob é“¾æ¥ï¼Œç„¶ååˆ©ç”¨ a æ ‡ç­¾å®ç°ä¸‹è½½ã€‚</li></ol><h4 id="ä»£ç å®ç°" tabindex="-1"><a class="header-anchor" href="#ä»£ç å®ç°" aria-hidden="true">#</a> ä»£ç å®ç°</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> mediaRecorder<span class="token punctuation">;</span>
<span class="token keyword">var</span> blobData<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getMediaAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å–å½•åˆ¶æƒé™</span>
  navigator<span class="token punctuation">.</span>mediaDevices
    <span class="token punctuation">.</span><span class="token function">getDisplayMedia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">mimeType</span><span class="token operator">:</span> <span class="token string">&quot;video/webm; codecs=vp9&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
      mediaRecorder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediaRecorder</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">eventListenerStopRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">eventListenerStopRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å½•åˆ¶åœæ­¢æ—¶ä¿å­˜å½•åˆ¶çš„blobæ•°æ®</span>
  mediaRecorder<span class="token punctuation">.</span><span class="token function-variable function">ondataavailable</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    blobData <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¼€å§‹å½•åˆ¶</span>
  mediaRecorder<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">stopRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœæ­¢å½•åˆ¶</span>
  mediaRecorder<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">downLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ä¸‹è½½æ–‡ä»¶</span>
  <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blobData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>style <span class="token operator">=</span> <span class="token string">&quot;display: none&quot;</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>href <span class="token operator">=</span> url<span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;screen-record.webm&quot;</span><span class="token punctuation">;</span>
  a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·å–å®¢æˆ·ç«¯-ip-åœ°å€" tabindex="-1"><a class="header-anchor" href="#è·å–å®¢æˆ·ç«¯-ip-åœ°å€" aria-hidden="true">#</a> è·å–å®¢æˆ·ç«¯ IP åœ°å€</h3><h4 id="å‰ç«¯è·å–" tabindex="-1"><a class="header-anchor" href="#å‰ç«¯è·å–" aria-hidden="true">#</a> å‰ç«¯è·å–</h4><p>å‰ç«¯æ— æ³•è·å–ç”¨æˆ· IPï¼Œä½†æ˜¯èƒ½é€šè¿‡åç«¯æ¥å£å®ç°ï¼Œè¿™é‡Œå€ŸåŠ©æœç‹çš„ api è·å– ip ä¿¡æ¯ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;script&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&quot;http://pv.sohu.com/cityjson?ie=utf-8&quot;</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>returnCitySN<span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">getIp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="nodejs-è·å–" tabindex="-1"><a class="header-anchor" href="#nodejs-è·å–" aria-hidden="true">#</a> NodeJS è·å–</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> os <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;os&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">getIPAdress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> interfaces <span class="token operator">=</span> os<span class="token punctuation">.</span><span class="token function">networkInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> devName <span class="token keyword">in</span> interfaces<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> iface <span class="token operator">=</span> interfaces<span class="token punctuation">[</span>devName<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> iface<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> alias <span class="token operator">=</span> iface<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        alias<span class="token punctuation">.</span>family <span class="token operator">===</span> <span class="token string">&quot;IPv4&quot;</span> <span class="token operator">&amp;&amp;</span>
        alias<span class="token punctuation">.</span>address <span class="token operator">!==</span> <span class="token string">&quot;127.0.0.1&quot;</span> <span class="token operator">&amp;&amp;</span>
        <span class="token operator">!</span>alias<span class="token punctuation">.</span>internal
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> alias<span class="token punctuation">.</span>address<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="app-åˆ†äº«é“¾æ¥" tabindex="-1"><a class="header-anchor" href="#app-åˆ†äº«é“¾æ¥" aria-hidden="true">#</a> App åˆ†äº«é“¾æ¥</h3><ul><li>URLï¼Œåˆ†äº«ç½‘å€</li><li>TITLEï¼Œæ ‡é¢˜</li><li>ORIGINï¼Œåˆ†äº« @ ç›¸å…³ twitter è´¦å·</li><li>SOURCEï¼Œæ¥æºï¼ˆQQ ç©ºé—´ä¼šç”¨åˆ°ï¼‰</li><li>DESCRIPTIONï¼Œæè¿°</li><li>IMAGEï¼Œå›¾ç‰‡</li><li>SUMMARYï¼Œæ‘˜è¦</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> templates <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">qzone</span><span class="token operator">:</span>
    <span class="token string">&quot;http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{URL}}&amp;title={{TITLE}}&amp;desc={{DESCRIPTION}}&amp;summary={{SUMMARY}}&amp;site={{SOURCE}}&amp;pics={{IMAGE}}&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">qq</span><span class="token operator">:</span> <span class="token string">&#39;http://connect.qq.com/widget/shareqq/index.html?url={{URL}}&amp;title={{TITLE}}&amp;source={{SOURCE}}&amp;desc={{DESCRIPTION}}&amp;pics={{IMAGE}}&amp;summary=&quot;{{SUMMARY}}&quot;&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">weibo</span><span class="token operator">:</span>
    <span class="token string">&quot;https://service.weibo.com/share/share.php?url={{URL}}&amp;title={{TITLE}}&amp;pic={{IMAGE}}&amp;appkey={{WEIBOKEY}}&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">wechat</span><span class="token operator">:</span> <span class="token string">&quot;javascript:&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">douban</span><span class="token operator">:</span>
    <span class="token string">&quot;http://shuo.douban.com/!service/share?href={{URL}}&amp;name={{TITLE}}&amp;text={{DESCRIPTION}}&amp;image={{IMAGE}}&amp;starid=0&amp;aid=0&amp;style=11&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">linkedin</span><span class="token operator">:</span>
    <span class="token string">&quot;http://www.linkedin.com/shareArticle?mini=true&amp;ro=true&amp;title={{TITLE}}&amp;url={{URL}}&amp;summary={{SUMMARY}}&amp;source={{SOURCE}}&amp;armin=armin&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">facebook</span><span class="token operator">:</span> <span class="token string">&quot;https://www.facebook.com/sharer/sharer.php?u={{URL}}&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">twitter</span><span class="token operator">:</span>
    <span class="token string">&quot;https://twitter.com/intent/tweet?text={{TITLE}}&amp;url={{URL}}&amp;via={{ORIGIN}}&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">google</span><span class="token operator">:</span> <span class="token string">&quot;https://plus.google.com/share?url={{URL}}&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‰ªè´´æ¿" tabindex="-1"><a class="header-anchor" href="#å‰ªè´´æ¿" aria-hidden="true">#</a> å‰ªè´´æ¿</h3><h4 id="å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿" tabindex="-1"><a class="header-anchor" href="#å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿" aria-hidden="true">#</a> å¤åˆ¶å†…å®¹åˆ°å‰ªè´´æ¿</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">setClipboarData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> oInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;input&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  oInput<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
  oInput<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span><span class="token function">execCommand</span><span class="token punctuation">(</span><span class="token string">&quot;Copy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  oInput<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>oInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è·å–å‰ªè´´æ¿å†…å®¹" tabindex="-1"><a class="header-anchor" href="#è·å–å‰ªè´´æ¿å†…å®¹" aria-hidden="true">#</a> è·å–å‰ªè´´æ¿å†…å®¹</h4><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/** è·å–å‰ªè´´æ¿å†…å®¹ */</span>
<span class="token keyword">function</span> <span class="token function">getClipboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;paste&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> cbd <span class="token operator">=</span> e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">;</span>
      <span class="token keyword">const</span> ua <span class="token operator">=</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">;</span>
      <span class="token comment">// å¦‚æœæ˜¯ Safari ç›´æ¥ return</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clipboardData <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>clipboardData<span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// Macå¹³å°ä¸‹Chrome49ç‰ˆæœ¬ä»¥ä¸‹ å¤åˆ¶Finderä¸­çš„æ–‡ä»¶çš„Bug Hackæ‰</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>
        cbd<span class="token punctuation">.</span>items <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;file&quot;</span> <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>types <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>types<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>types<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token operator">&amp;&amp;</span>
        cbd<span class="token punctuation">.</span>types<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;Files&quot;</span> <span class="token operator">&amp;&amp;</span>
        ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Macintosh</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
        <span class="token function">Number</span><span class="token punctuation">(</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Chrome\/(\d{2})</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">49</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">let</span> <span class="token literal-property property">blob</span><span class="token operator">:</span> File<span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> cbd<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> item <span class="token operator">=</span> cbd<span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          blob <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">getAsFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>blob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>blob<span class="token punctuation">.</span>size <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> blob<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·³è½¬åˆ°å¾®ä¿¡" tabindex="-1"><a class="header-anchor" href="#è·³è½¬åˆ°å¾®ä¿¡" aria-hidden="true">#</a> è·³è½¬åˆ°å¾®ä¿¡</h3><ul><li>è·³è½¬åˆ°å¾®ä¿¡é¦–é¡µ</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weixin://<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>è·³è½¬åˆ°å¾®ä¿¡<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>æ‰“å¼€å¾®ä¿¡å…¬ä¼—å·é¡µé¢</li></ul><p>æ³¨æ„è¯¥é“¾æ¥åªèƒ½åœ¨å¾®ä¿¡å†…ç½®æµè§ˆå™¨ä¸­æ‰“å¼€</p><p>éœ€è¦å°†é“¾æ¥ä¸­çš„ <code>__biz</code> å€¼æ›¿æ¢ä¸ºå¯¹åº”å…¬ä¼—å·çš„ <code>uin_base64</code>ï¼Œè¯¥å€¼å¯åœ¨å¾®ä¿¡å…¬ä¼—å·é¦–é¡µï¼ˆç™»å½•åï¼‰åœ¨æ§åˆ¶å°æ‰“å° <code>wx.data.uin_base64</code> å¾—åˆ°ã€‚</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span>
  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://mp.weixin.qq.com/mp/profile_ext?action=home&amp;__biz=MzI4ODEyNTE2Nw==#wechat_redirect<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>æ‰“å¼€å¾®ä¿¡å…¬ä¼—å·é¡µé¢<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span>
<span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¤–éƒ¨æµè§ˆå™¨è·³è½¬è‡³å¾®ä¿¡å…¬ä¼—å·</li></ul><p>å¯ä»¥é€šè¿‡å¾®ä¿¡å°ç¨‹åºæä¾›çš„ <code>URL Scheme</code> å…ˆè·³è½¬è‡³å°ç¨‹åºï¼ˆ<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/url-scheme.html" target="_blank" rel="noopener noreferrer">URL Scheme æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼‰ï¼Œå†åœ¨å°ç¨‹åºä¸­å¼•å¯¼å…³æ³¨å…¬ä¼—å·ã€‚</p></div><!----><footer class="page-meta"><!----><!----><!----></footer><!----><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.382dc3cd.js" defer></script>
  </body>
</html>
