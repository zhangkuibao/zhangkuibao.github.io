# 伪元素的层叠上下文

<author-info date="{docsify-updated}"> </author-info>

## 父元素与伪元素在不同的层叠上下文中

同一个层叠上下文里面, 层叠顺序从后向前依次是: 背景和边框、负 z-index、块级盒、浮动盒、行内盒、z-index:0、正 z-index。

伪元素相当于子元素，也就是包含在元素内的，二者不在同一个层叠上下文中。

## 让父元素与伪元素在同一个层叠上下文中

如果想实现层叠效果，需要元素和对应的伪元素在同一层叠上下文中，所以不能让元素创建层叠上下文。以下情况会创建层叠上下文：

- 即便是 position 不为 static 的元素, 如果没有指定一个非 auto 值的 z-index, 该元素就不会建立一个层叠上下文。
- 元素的 transform 值不是 none，因为 transform 会创建层叠上下文，所以缓动的时候只能使用 top 进行变换了。

## 结论

让父元素与伪元素在同一个层叠上下文中需要父元素不设置 z-index 值，伪元素设置负 z-index 值，父元素位移效果不使用 transform。

## 参考

[CSS 伪元素:before&:after 与 z-index 的那点事](https://fatesinger.com/100258)
